

// mixins & constants

@mixin border {
    border: 5px solid #0ff;
}

@mixin transdefaults($params) {
    transition: $params;
    -webkit-transition: $params;
    -moz-transition: $params;
    -o-transition: $params;
}

$col-padding: 4.5rem;

.typeset p {
    text-indent: 5rem;
    -moz-hyphens: auto;
    -webkit-hyphens: auto;
    -o-hyphens: auto;
    hyphens: auto;
}

.typeset p img {
    display: block;
}

body {
    overflow: hidden;
}

.main-wrapper {

    @include outer-container(100%);
    background-color: $backgroundColour;

    @include media-query($on-laptop){
        background-color: $backgroundColour;
        position: relative;
    }

    @include media-query($on-palm){
        overflow-y: scroll;
        overflow-x: hidden;
        height: 100vh;
    }
}

.typeset p.left-justify {
    text-indent: 0;
}

// Perfect scrollbar overrides
//
// issue with typeset text-indent applying to images
// wrapped in <p> as parsed by markdown, forcing
// x scroll

.ps#left {

    .ps__scrollbar-y-rail{ left: 0; }
    .ps__scrollbar-x-rail{ display: none; }
}

.ps#right, .ps#pasp {

    .ps__scrollbar-y-rail{ right: 0.2rem; }
    .ps__scrollbar-x-rail{ display: none; }

}

// * * * * * Landing Page Elements * * * * *

// General column content

.column {

    @include span-columns(6);
    background-color: $backgroundColour;
    position: relative;
    top: -50vh;
    height: 100vh;
    overflow-y: scroll;
    overflow-x: hidden;
    margin: 0;
    padding: 0 $col-padding;
    z-index: 2;

    h2 { text-align: center; }

    @include media-query($on-palm){
        @include outer-container(100%);
        @include span-columns(12);
        position: inherit;
        height: auto;
    }

    @media screen and (min-width: 480px) and (max-width: $on-palm) {
        padding-top: 0;
        padding-bottom: 0;
        padding-left: 2 * $col-padding;
        padding-right: 2 * $col-padding;
    }

    @media screen and (max-width: 480px) {
        padding: 0 1rem;
    }

    a.site-title,
    a.site-title:hover,
    a.site-title:focus {
        text-decoration: none;
        cursor: pointer;
    }
}

.column#left {

    @include transdefaults(margin .5s ease-out 0s);

    /** styles for left column reverse color scheme **/

    background-color: lighten($bodyColour, 25%);
    color: $backgroundColour;

    h2.post-title, .site-title h4, a {
        color: $backgroundColour;
    }

    a.site-title {
        padding: 0 1.25rem;
    }

    a.site-title:nth-of-type(1),
    a.site-title:nth-of-type(4){
        padding-left: 0;
    }

    a.site-title:nth-of-type(3),
    a.site-title:nth-of-type(6){
        padding-right: 0;
    }

    @media screen and (max-width:1320px) {
        a.site-title {
            padding: 0;
        }
    }

   article {
        & a, & a:hover, & a:hover,
        & a:focus, & a:visited { 
            color: $backgroundColour;
            background-image: none;
            text-decoration: underline;
            text-shadow: unset;
        }

        & a:hover { 
        color: lighten($PasP-primary, 5%); 
        }
    }
}

.column#right {
    float: right;
    @include transdefaults(margin .5s ease-out 0s);
}


// Publishing as Practice Reveal Pane

.column#left.reveal {
    margin-left: -50%;
    @include transdefaults(margin .5s ease-out 0s);
}

.column#right.reveal {
    margin-right: 50%;
    @include transdefaults(margin .5s ease-out 0s);
}

.column#left.reveal,
.column#right.reveal {

    @include media-query($on-palm){
        margin: 0 auto;
    }
}

#pasp .pasp-reveal {
    @include media-query($on-palm) {
        display: none;
    }
}

#pasp .pasp-reveal:hover {
    .close-x {
        stroke: $linkColour;
    }
}

.column.column--right .pasp-reveal {
    visibility: hidden;

    @include media-query($on-palm) {
        visibility: visible;
    }
}

#pasp-reveal {

    @include transdefaults(color .2s ease-out);

    z-index: 3;
    cursor: pointer;
    font-family: unquote(map-get($headingtype,font-family));
    line-height: 2.3rem;

    p {
        display: inline-block;
        float: right;
    }
    
    svg {
        display: inline-block;
        width: 5.5rem;
        height: 5.5rem;
        stroke: $bodyColour;
        fill: transparent;
        stroke-width: .75;
        @include transdefaults(stroke .2s ease-out);

        position: relative;
        top: 1rem;
        right: -13.75rem;
    }

    svg.hide,
    &:hover svg.hide {
        stroke: rgba(255,255,255,0);
    }

    &:hover, &:hover svg {
        color: $PasP-primary;
        stroke: $PasP-primary;
    }


    @include media-query($on-palm) {
        display: none;
    }
}

#pasp-reveal.fixed {
    position: fixed;
    right: $col-padding;
    top: 1rem;
}

.typeset#pasp {
    
    z-index: 1;
    position: relative;
    top: -150vh;
    right: -50vw;

    article.post {
      padding-top: 6.5rem;  
    }

    @include media-query($on-palm){
        display: none;
    };

}
 
#pasp {

    &.column,
    article.post, 
    .slide .expanded {

        background-color: $PasP-contrast;

        h1,h2,h3,h4,p {
            color: $PasP-primary;
            font-family: unquote(map-get($headingtype, font-family));
            font-style: normal;
            font-weight: map-get($bodytype, regular);            
        }

        h3 {
            line-height: 3rem;
        }

        & a, & a:hover, & a:hover,
        & a:focus, & a:visited { 
            color: $PasP-primary;
            background-image: none;
            cursor: pointer;
            text-shadow: unset;
            text-decoration: underline;
        }

        & a:hover { 
            color: $linkColour; 
        }

        img {
            width: 200px
        }
    }
}

// bother column headers

header.site-header {

    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    padding-top: 2rem;

    & a, & a:hover, & a:hover,
    & a:focus, & a:visited { 
        color: $bodyColour;
        background-image: none;
        cursor: pointer;
        text-decoration: none;
        background-image: none;
        text-shadow: unset;
    }

    & a:hover { 
        color: $linkColour; 
    }
    
    & a span{
        font-family: unquote(map-get($bodytype, font-family));
        font-weight: 300;
    }

    & a p span {
        font-family: unquote(map-get($headingtype, font-family));
        font-weight: 300;
    }
}

// left column header

header.site-header.left {

    display: flex;
    justify-content: space-between;
    min-height: 4rem;
    margin-bottom: 2rem;

    a h4 { margin: 0; }

    #info-button p a:hover, a:hover p {
        color: $PasP-primary;
    }
}

// right column header nav

header.site-header.right {

    @include span-columns(12);

    margin-bottom: 1rem;
    
    div.info {
        width: 100%;
    }

    .info-wrapper{

        display: flex;
        flex-wrap: no-wrap;
        justify-content: space-between;

        & div {

            font-family: "Times New Roman Seven", Times, serif;

            & p {
                text-align: left;
                text-indent: 0;
                margin-top: 0;
                line-height: 2.3rem;
            }


            @include media-query($on-laptop){
                font-size: 100%;
            }

        }

        & div:nth-of-type(2) p {
            padding-left: 1.5rem;

            @include media-query($on-laptop){
                padding-left: 0;
            }
        }

        & span { font-family:  Lars, "Helvetica Neue", sans-serif; }

        & .pasp-reveal:hover p{
            color: $hoverColour;
        }
    }

    @include media-query($on-laptop) {
        margin-top: 9rem;
    }
}

header.site-header {

    .content-wrapper {
        width: 100%;
    }

    .info-wrapper {
        display: flex;
        flex-wrap: no-wrap;
        justify-content: space-evenly;
    }


    & .slide .info-wrapper p {
        margin: 0;
    }

    & .slide div.info-wrapper:nth-child(2) {
        margin-bottom: 3rem;
    }

    @include media-query($on-laptop) {
        .typeset h4 {
            font-size: unset;
        }
    }
 
    @include media-query($on-laptop) {

        .info-wrapper {
            width: 100%;
            flex-direction: column;
            align-items: center;

            p,span { 
                text-indent: unset;
                margin: 1rem 0 0 0;
            }
        }
    }
}

// Info slide in panel

.slide {

    width: 50vw;
    height: 0;
    position: relative;
    left: -$col-padding;

    color: $backgroundColour;   

    @include media-query($on-palm){

        min-width: 100vw;
        left: -2 * $col-padding - 1rem;
        padding: 0 1rem;
    
        & > p:last-child { padding-bottom: 1rem; }
    }

    @media screen and (max-width: 480px){

        min-width: 100vw;
        left: -$col-padding/2 + .25rem;
        padding: 0 1rem;

        & > p:last-child { padding-bottom: 1rem; }
    } 
}

.slide .excerpted {
    max-height: 0;
    overflow: hidden;
}

.slide .expanded {

    margin-bottom: $col-padding/2;
    max-height: 0;
    padding: 0rem $col-padding;
    overflow: hidden;
    z-index: 99;
    @include transdefaults(max-height .5s ease-in-out);

    & > p { clear: both; }

    & > p:last-child { padding-bottom: $col-padding/2; }

    @media screen and (min-width: 480px) and (max-width: $on-palm) {
        width: 98vw;
        left: -2 * $col-padding;
    }

    @include media-query($on-palm) {

        min-width: 100vw;
        left: -1rem;
        & > p:last-child { padding-bottom: 1rem; }
    }

    @media screen and (max-width: 480px) {
        padding: 0 1rem;
    }
}

.slide .expanded.show {

    // height for expanded info panel
    width: 100%;
    max-height: 200rem;
    padding: 0rem $col-padding;

    @media screen and (max-width: 480px) {
        padding: 0 1rem;
    }

    -webkit-box-shadow: 0 .75rem 6px -6px rgba(200,200,200,.75);
    -moz-box-shadow: 0 .75rem 6px -6px rgba(200,200,200,.75);
    box-shadow: 0 .75rem 6px -6px rgba(200,200,200,.75);
}

#pasp .slide .expanded {

    & > p:first-child { margin-top: 2rem;}
}

#info .slide .expanded {

    & > div.info-wrapper:nth-of-type(1) { margin-top: 1rem;}
}

#info .slide .expanded{    

    background-color: lighten($bodyColour, 25%);
    color: $backgroundColour;

    @include media-query($on-palm) {

        background-color: $backgroundColour;
        color: $bodyColour;
    }
}

#info .slide .expanded {

    // mailchimp embed form
    & div#mc_embed_signup {
    
        width: 75%;
        float: left;
        margin-left: 12.5%;

        label { display: none; }
        
        & div.mc-field-group,
        & div.clear {
        
            display: inline;
            float: left;

        }

        // mc input field
        & div.mc-field-group {

            width: 90%;
            margin-bottom: 1.55rem;

            & input {
                width: 100%;
                height: 2.75rem;
                color: $backgroundColour;
                border: 2px solid $backgroundColour;
                padding-left: 1rem;
                border-radius: 0;
            }

            & input::placeholder {
                font-family: unquote(map-get($headingtype, font-family));
                font-style: normal;
                font-weight: map-get($bodytype, regular);
            }
       }

        // mc input button
        & div.clear { width: 10%; float: right; }
        & div.clear input.button {

            height: 2.75rem;
            background-color: $backgroundColour;
            color: $bodyColour;
            font-size: 2rem;
            padding: 0 0.3rem;
            border: unset;
            border-radius: 1px;
            margin: 0;
        }

        & div.clear input.button:hover {
            color: $linkColour;
        }
    }
}

h2.post-title {
    text-transform: uppercase;
}

header.post-header p {
    text-indent: 0;
    text-align: center;
}

article.post {
    margin-bottom: 4rem;
}

article.post div.post-content {

    & ul {
        list-style: decimal;
    }

    & ol li, & ul li {

        padding-top: .75rem;
        text-indent: 0;
        padding-left: .5rem;
    }
}

// * * * * * Splash Page Elements * * * * *

.splash-panel.hide {
    top: -50vh;
    height: 50vh;
    @include transdefaults(all .6s linear);

    a#splash-body-anchor p {
        top: -25vh !important;
        @include transdefaults(top .6s linear .2s);
    }

}

.splash-panel {
    
    @include transdefaults(height 1s ease-out);
    background-color: lighten($bodyColour, 10%);
    height: 100vh;
    width: 100vw;
    position: relative;
    display: block;
    top: 0;
    z-index: 99;
}

.splash-panel a {

    height: 100%;
    display: block;

    span {
        @include transdefaults(color .5s linear);
    }

    p {

        position: absolute;
        right: 5%;

        line-height: 5rem;
        letter-spacing: .8rem;

        font-family: Kadisoka;
        text-transform: uppercase;
        font-size: 4.25rem;
        @include transdefaults(color .5s linear);

        @include media-query ($on-palm){
            display: none;
        }
    }

    p#hw {

        top: 15%;
        text-indent: -8rem;
    }

    p#bd {

        top: 47%;
        margin-right: 10%;
        text-align: center;
    }

    p#ms{
        top: 65%;
    }

    div.scroll-wrapper {
        position: absolute;
        top: 0;
        overflow-x: hidden;
        overflow-y: auto;
        width: 100vw;
        height: 100%;
        max-height: 100vh;

        .ps__scrollbar-y {
            display: none;
        }
    }

    div.scroll-wrapper div {

        width: 20%;
        max-width: 300px;
        margin-left: 2rem;
        float: left;

        @include media-query ($on-palm){
            width: 33%;
            margin-left: 0;
        }
    
        span { 
            display: block; 
            font-family:  Lars, "Helvetica Neue", sans-serif;
            font-size: 1.1rem;
            line-height: 1.2rem;
            text-transform: uppercase;

            @include media-query ($on-palm){
                // font-size: 1.1rem;
                // line-height: 1.rem;
            }

        }
    }

    div.scroll-wrapper div.col-2 {
        margin-left: 3%;

        @include media-query($on-palm){
            margin-left: 10%;
        }

    }
}


// splash scroll color schemes
.splash-panel {
    a, p, .scroll-wrapper {
        display: block;
    }
}

.splash-panel a {

    height: 100%;
    max-height: 100%;

    @include transdefaults(background-color 2s linear);


    &.default {
        background-color: lighten($bodyColour, 10%);
        span,p {
            color: $backgroundColour;
        }
    }

    &.inverse {
        background-color: $backgroundColour;
        span,p {
            color: $bodyColour;
        }
    }

    &.hw {
        background-color: $backgroundColour;
        span,p {
            color: $hwBlue;
        }
    }

    &.ms {
        background-color: lighten($msGreen, 5%);
        span,p {
            color: $bodyColour;
        }
    }

    &.bd {
        background-color: $bYellow;
        span,p {
            color: $backgroundColour;
        }
    }
}